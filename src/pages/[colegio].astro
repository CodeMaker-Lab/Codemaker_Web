---
import Layout from "@/layouts/Layout.astro";
import Nav from "@/components/nav.astro";
import Footer from "@/components/footer.astro";
import SchoolPageClient from "@/components/SchoolPageClient.tsx";
import { getSchools } from "@/lib/google-sheets";

export async function getStaticPaths() {
  // Only fetches IDs at build time â€” the actual school data is loaded
  // dynamically by SchoolPageClient at runtime, so it stays up to date.
  const schools = await getSchools();
  return schools
    .filter((school) => school.status === "live")
    .map((school) => ({
      params: { colegio: school.id },
    }));
}

const { colegio } = Astro.params;
---

<Layout title={`CodeMaker | ${colegio}`}>
  <Nav />

  <main class="overflow-x-hidden">
    <SchoolPageClient schoolId={colegio} client:only="react" />
  </main>

  <Footer />
</Layout>

<style is:global>
  .patron-puntos {
    background-image: radial-gradient(
      rgba(0, 71, 122, 0.05) 1.5px,
      transparent 1.5px
    );
    background-size: 20px 20px;
  }
  .patron-puntos-luz {
    background-image: radial-gradient(
      rgba(255, 255, 255, 0.1) 1.5px,
      transparent 1.5px
    );
    background-size: 20px 20px;
  }
</style>
