---
import Layout from "@/layouts/Layout.astro";
import Nav from "@/components/nav.astro";
import Footer from "@/components/footer.astro";
---

<Layout title="Iniciar Sesión | CodeMaker">
  <Nav />
  
  <main class="min-h-screen pt-32 pb-24 px-6 bg-slate-50 relative overflow-hidden flex items-center justify-center">
    <!-- Background Patterns -->
    <div class="absolute inset-0 opacity-[0.03] patron-puntos pointer-events-none"></div>
    <div class="absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-blue-100/20 to-transparent pointer-events-none"></div>

    <div class="max-w-md w-full relative z-10">
      <div class="bg-white rounded-[2.5rem] p-8 md:p-12 border border-slate-200 shadow-2xl space-y-8">
        <div class="text-center space-y-3">
          <div class="w-20 h-20 bg-blue-50 rounded-3xl flex items-center justify-center mx-auto mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#00477A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <h1 class="text-3xl font-black text-[#00477A] tracking-tight">Acceso Alumnos</h1>
          <p class="text-slate-500 font-medium">Introduce tus credenciales para acceder a la plataforma educativa.</p>
        </div>

        <!-- Fake Error Message (Hidden by default) -->
        <div id="error-message" class="hidden bg-red-50 border border-red-100 rounded-2xl p-4 flex items-center gap-3 text-red-600 animate-shake">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          <p class="text-sm font-bold">Usuario o contraseña incorrectos.</p>
        </div>

        <form id="login-form" class="space-y-6" onsubmit="return false;">
          <div class="space-y-2">
            <label class="text-xs font-black uppercase tracking-widest text-slate-400 ml-1">Usuario / Email</label>
            <input 
              type="text" 
              placeholder="Ej: alumno@codemaker.es" 
              class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100 transition-all font-medium"
            />
          </div>

          <div class="space-y-2">
            <label class="text-xs font-black uppercase tracking-widest text-slate-400 ml-1">Contraseña</label>
            <input 
              type="password" 
              placeholder="••••••••" 
              class="w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 outline-none focus:border-blue-400 focus:ring-4 focus:ring-blue-100 transition-all font-medium"
            />
          </div>

          <button 
            type="submit"
            id="login-button"
            class="w-full bg-[#00477A] text-white py-5 rounded-2xl font-black text-lg shadow-xl shadow-blue-900/20 active:scale-[0.98] transition-all hover:bg-[#00365d]"
          >
            ENTRAR AHORA
          </button>
        </form>

        <div class="pt-4 text-center">
          <a href="/" class="text-slate-400 hover:text-blue-600 font-bold text-sm transition-colors uppercase tracking-widest">
            Volver al inicio
          </a>
        </div>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  const loginButton = document.getElementById('login-button');
  const errorMessage = document.getElementById('error-message');

  loginButton?.addEventListener('click', () => {
    errorMessage?.classList.remove('hidden');
    
    // Optional: Hide and reshow to trigger the shake animation again
    errorMessage?.classList.remove('animate-shake');
    void errorMessage?.offsetWidth; // force reflow
    errorMessage?.classList.add('animate-shake');
  });
</script>

<style>
  .patron-puntos {
    background-image: radial-gradient(rgba(0, 71, 122, 0.05) 1.5px, transparent 1.5px);
    background-size: 20px 20px;
  }
  
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
    20%, 40%, 60%, 80% { transform: translateX(4px); }
  }
  
  .animate-shake {
    animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
  }
</style>
