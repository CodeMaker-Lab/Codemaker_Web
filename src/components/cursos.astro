---
import ClientesSlide from "../components/ClientesSlide.astro";
import Niveles from "./Niveles.astro";
import Colegios from "./colegios.astro";
---
<section
  id="cursos"
  class=" bg-slate-100 py-12 border-t text-[--text-dark] px-10 patron-puntos"

>
  <div class="max-w-5xl mx-auto ">
    <h2 class="text-lg font-bold text-[#007AFB] mb-2 shiny-sec-text-edu">CodeMaker_Edu</h2>
    <h3 class="text-4xl md:text-5xl font-medium mb-8">Cursos y Actividades extraescolares</h3>
    <div class="text-md md:text-lg text-left md:text-left">
      Además de nuestras apps, los docentes colaboradores de CodeMaker llevan desde 2014 impartiendo cursos y actividades extraescolares para alumnos y alumnas de <span class="font-bold text-[#007AFB]">primaria, secundaria y bachillerato</span>, en los que enseñamos las tecnologías más importantes del presente y del futuro mediente una metodología atractiva y práctica. Más de <span class="font-bold text-[#00477A]">1000 alumnos y alumnas</span> han pasado por nuestras aulas para aprender programación, robótica, impresión 3D, Inteligencia Artificial y fomentar sus capacidades <span class="font-bold text-[#007AFB]">STEAM</span>.
      </div>

    <br />
    <br />

    <div class="flex flex-col items-center gap-6">
      <!-- Vídeo con borde animado -->
      <div class="w-full rounded-2xl overflow-hidden shadow-lg mb-4">
        <div class="relative rounded-2xl p-[2px] shiny-sec-border-edu">
          <div class="rounded-[0.9rem] overflow-hidden bg-slate-100 h-96">
            <video
              src="/videos/presentacion-codemaker.mp4"
              autoplay
              muted
              loop
              playsinline
              class="w-full h-full object-cover object-center"
            ></video>
            <div class="absolute inset-0 bg-slate-500/10 pointer-events-none"></div>
          </div>
        </div>
      </div>
    </div>


      <!-- Texto y contenido en 2 columnas -->
      <br />
      <br />
       <div>
      <br />

      <div class="grid grid-cols-1 md:grid-cols-3 items-start w-full gap-8">
          <!-- Botón 1: Niveles -->
          <div class="flex flex-col h-full bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
            <div class="text-sm md:text-md text-slate-600 mb-6 text-center leading-relaxed">
              Consulta los niveles y contenidos que se trabajan en los cursos:
            </div>
            <button
              id="open-niveles"
              class="mt-auto w-full inline-flex justify-center items-center text-slate-100 transition-all duration-300 ease-in-out border border-[#007AFB] px-6 py-3 rounded-xl bg-[#007AFB] hover:bg-[#00477A] font-bold min-h-[56px] active:scale-95 shadow-lg hover:shadow-blue-200"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="m16 6 4 14"/><path d="M12 6v14"/><path d="M8 8v12"/><path d="M4 4v16"/></svg>
              Ver niveles
            </button>
          </div>
          
          <!-- Botón 2: Centros -->
          <div class="flex flex-col h-full bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
            <div class="text-sm md:text-md text-slate-600 mb-6 text-center leading-relaxed">
              Consulta los centros asociados a CodeMaker:
            </div>
            <button
              id="open-centros"
              class="mt-auto w-full inline-flex justify-center items-center text-slate-100 transition-all duration-300 ease-in-out border border-[#00477A] px-6 py-3 rounded-xl bg-[#00477A] hover:bg-[#002d4d] font-bold min-h-[56px] active:scale-95 shadow-lg"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M3 22h18"/><path d="M5 22V8l7-5 7 5v14"/><path d="M14 11h2"/><path d="M14 15h2"/><path d="M10 11h2"/><path d="M10 15h2"/></svg>
              Ver centros
            </button>
          </div>
          
          <!-- Botón 3: Nuevo centro -->
          <div class="flex flex-col h-full bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-shadow">
            <div class="text-sm md:text-md text-slate-600 mb-6 text-center leading-relaxed">
              ¿Quieres ofrecer esta formación en tu centro educativo?
            </div>
            <a
              href="mailto:info@codemaker.es"
              class="mt-auto w-full inline-flex justify-center items-center text-slate-100 transition-all duration-300 ease-in-out border border-slate-700 px-6 py-3 rounded-xl bg-slate-800 hover:bg-slate-900 font-bold min-h-[56px] active:scale-95 shadow-lg"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              Contactar
            </a>
          </div>
        </div>
      </div>
  </div>
</div>

<!-- Modal Structure -->
<div id="modal-overlay" class="fixed inset-0 z-[110] hidden bg-black/60 backdrop-blur-sm transition-opacity duration-300 items-start md:items-center justify-center p-4 overflow-y-auto">
  <div id="modal-container" class="relative bg-white w-full max-w-6xl rounded-2xl shadow-2xl transform transition-all duration-300 scale-95 opacity-0 overflow-hidden">
    <!-- Close Button -->
    <button id="close-modal" class="absolute top-4 right-4 z-10 p-2 text-slate-500 hover:text-[#007AFB] transition-colors bg-white/80 backdrop-blur rounded-full shadow-md" aria-label="Cerrar modal">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="size-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
    
    <!-- Modal Content -->
    <div id="modal-content" class="max-h-[90vh] overflow-y-auto">
      <div id="content-niveles" class="hidden">
        <Niveles />
      </div>
      <div id="content-centros" class="hidden">
        <Colegios />
      </div>
    </div>
  </div>
</div>

</section>

<script>
  const overlay = document.getElementById('modal-overlay');
  const container = document.getElementById('modal-container');
  const closeBtn = document.getElementById('close-modal');
  const contentNiveles = document.getElementById('content-niveles');
  const contentCentros = document.getElementById('content-centros');
  const openNivelesBtn = document.getElementById('open-niveles');
  const openCentrosBtn = document.getElementById('open-centros');

  function openModal(type) {
    // Hide all contents first
    contentNiveles?.classList.add('hidden');
    contentCentros?.classList.add('hidden');

    // Show correct content
    if (type === 'niveles') contentNiveles?.classList.remove('hidden');
    if (type === 'centros') contentCentros?.classList.remove('hidden');

    // Show modal
    overlay?.classList.remove('hidden');
    overlay?.classList.add('flex');
    
    // Animate entries
    setTimeout(() => {
      container?.classList.remove('scale-95', 'opacity-0');
      container?.classList.add('scale-100', 'opacity-100');
    }, 10);

    // Disable body scroll
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    container?.classList.remove('scale-100', 'opacity-100');
    container?.classList.add('scale-95', 'opacity-0');
    
    setTimeout(() => {
      overlay?.classList.add('hidden');
      overlay?.classList.remove('flex');
    }, 300);

    // Re-enable body scroll
    document.body.style.overflow = '';
  }

  openNivelesBtn?.addEventListener('click', () => openModal('niveles'));
  openCentrosBtn?.addEventListener('click', () => openModal('centros'));
  closeBtn?.addEventListener('click', closeModal);

  // Close on backdrop click
  overlay?.addEventListener('click', (e) => {
    if (e.target === overlay) closeModal();
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !overlay?.classList.contains('hidden')) {
      closeModal();
    }
  });
</script>

<style is:global>

.patron-puntos {
  background-image: radial-gradient(rgba(0, 122, 251, 0.15) 0.5px, transparent 0.5px);
  background-size: 10px 10px;
}


  .shiny-sec-border-edu {
    background: linear-gradient(135deg, #007AFB 15%, #FFFFFF 50%, #00477A 100%);
    background-size: 400%;
    animation: shine-border-edu 6s linear infinite;
  }

  @keyframes shine-border-edu {
    0% {
      background-position: 100% 50%;
    }
    30%, 70% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 100% 50%;
    }
  }

  .shiny-sec-text-edu {
    background: linear-gradient(135deg, #007AFB 15%, #00477A 100%);
    background-size: 400% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: shine-text-edu 3s linear infinite;
  }

  @keyframes shine-text-edu {
    0% {
      background-position: 100% 50%;
    }
    30%, 70% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 100% 50%;
    }
  }
</style>
