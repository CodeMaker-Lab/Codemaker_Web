---
import { getGlobalConfig } from "@/lib/google-sheets";

const config = await getGlobalConfig();
const linkApp = config.link_app || '/login';
---

<div class="flex justify-center w-full">
  <nav
    id="main-nav"
    class="fixed left-1/2 -translate-x-1/2 z-[100] bg-slate-950/80 border border-white/10 backdrop-blur-xl transition-all duration-500 ease-in-out md:top-6 md:bottom-auto bottom-6 w-[95%] rounded-2xl md:rounded-full px-6 py-2 md:py-3"
  >
    <div class="flex justify-between items-center gap-4">
      <!-- Logo -->
      <a href="/" class="shrink-0 transition-transform hover:scale-105 active:scale-95">
        <img 
          src="/svg/LogoInvertido.svg" 
          alt="CodeMaker Logo" 
          class="h-5 md:h-6 w-auto object-contain"
        />
      </a>

      <!-- Navigation Links -->
      <div class="flex items-center gap-8 md:gap-12">
        <!-- Home Link -->
        <a 
          href="/" 
          class="flex flex-col items-center gap-1 text-slate-400 hover:text-white transition-all group"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover:scale-110"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span class="text-[10px] md:text-xs uppercase tracking-[0.15em] opacity-80 group-hover:opacity-100">Home</span>
        </a>

        <!-- Entrar Link -->
        <a 
          href={linkApp} 
          class="flex flex-col items-center gap-1 text-slate-400 hover:text-[#007AFB] transition-all group"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover:scale-110"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
          <span class="text-[10px] md:text-xs uppercase tracking-[0.15em] opacity-80 group-hover:opacity-100">Entrar</span>
        </a>
      </div>
    </div>
  </nav>
</div>

<style>
  #main-nav {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #main-nav.scrolling {
    background-color: rgba(0, 71, 122, 0.85);
    border-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.3);
  }

  @media (max-width: 767px) {
    #main-nav {
      bottom: 1.5rem;
      width: calc(100% - 3rem);
      left: 50%;
    }
  }
</style>

<script>
  const nav = document.getElementById("main-nav");

  function updateNav() {
    if (window.scrollY > 50) {
      nav?.classList.add("scrolling");
    } else {
      nav?.classList.remove("scrolling");
    }
  }

  window.addEventListener("scroll", updateNav, { passive: true });
  // Initial check
  updateNav();
</script>
